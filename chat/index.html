<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bate papos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="shortcut icon" href="../imgs/Logo.svg" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: #f9f9fb;
            color: #111;
        }

        .hidden {
            display: none !important;
        }

        /* SIDEBAR */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 100px;
            height: 100vh;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            z-index: 1000;
        }
        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 15px 0;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #000000;
        }
        .menu-item:hover {
            background-color: #f8f8f8;
        }
        .menu-item i {
            font-size: 28px;
            margin-bottom: 8px;
            color: #000000;
            transition: all 0.2s;
        }

        .menu-item:not(.active) i {
            opacity: 0.4;
        }

        .menu-item.active i {
            opacity: 1;
        }

        .menu-item span {
            font-size: 12px;
            font-weight: 400;
            color: #000000;
            text-align: center;
        }

        /* CONTEÚDO PRINCIPAL */
        .main-content {
            margin-left: 95px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fff;
            justify-content: center;
        }

        /* TELA DE SELEÇÃO */
        .selection-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .title {
            text-align: center;
            font-size: 2.7rem;
            font-weight: 600;
            margin-bottom: 70px;
            line-height: 1.25;
            max-width: 600px;
        }

        .highlight {
            color: #8A38F5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 28px;
            width: 100%;
            max-width: 480px;
            align-items: center;
        }

        .option-card {
            width: 100%;
            padding: 28px 32px;
            display: flex;
            align-items: center;
            gap: 26px;
            background: #fff;
            border: 2px solid #ececec;
            border-radius: 20px;
            cursor: pointer;
            transition: 0.25s ease;
        }

        .option-card:hover {
            box-shadow: 0px 10px 25px rgba(138, 56, 245, 0.12);
            border-color: #8A38F5;
            transform: translateY(-3px);
        }

        .option-card.selected {
            border-color: #8A38F5;
            background: #f4ecff;
            box-shadow: 0px 12px 30px rgba(138, 56, 245, 0.23);
        }

        .icon-circle {
            width: 110px;
            height: 110px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid #111;
            transition: 0.25s;
            flex-shrink: 0;
        }

        .option-card.selected .icon-circle {
            border-color: #8A38F5;
        }

        .icon-circle i {
            font-size: 3.2rem;
            color: #111;
        }

        .option-card.selected .icon-circle i {
            color: #8A38F5;
        }

        .option-text {
            font-size: 1.6rem;
            font-weight: 600;
        }

        .option-card.selected .option-text {
            color: #8A38F5;
        }

        .divider {
            font-size: 1.1rem;
            color: #777;
            margin: 8px 0;
        }

        /* TELA DE CHAT */
        .chat-screen {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid #eee;
        }

        .chat-bot-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .bot-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid #111;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
        }

        .bot-avatar i {
            font-size: 1.8rem;
            color: #8A38F5;
        }

        .bot-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .chat-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.8rem;
            color: #111;
            transition: 0.2s;
            padding: 8px;
        }

        .action-btn:hover {
            color: #8A38F5;
            transform: scale(1.1);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 70%;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            align-self: flex-start;
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .message.bot .message-avatar {
            border: 2px solid #111;
        }

        .message.bot .message-avatar i {
            color: #8A38F5;
            font-size: 1.4rem;
        }

        .message.user .message-avatar {
            border: 2px solid #8A38F5;
        }

        .message.user .message-avatar i {
            color: #111;
            font-size: 1.4rem;
        }

        .message-bubble {
            background: #fff;
            border: 2px solid #111;
            border-radius: 20px;
            padding: 18px 22px;
            font-size: 1rem;
            line-height: 1.5;
        }

        .message.user .message-bubble {
            background: #f4ecff;
            border-color: #8A38F5;
        }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 10px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #111;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.7;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        .chat-input-container {
            padding: 20px 30px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .emoji-btn {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: #111;
            transition: 0.2s;
        }

        .emoji-btn:hover {
            transform: scale(1.15);
        }

        .chat-input {
            flex: 1;
            border: 2px solid #ddd;
            border-radius: 30px;
            padding: 15px 25px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            outline: none;
            transition: 0.25s;
        }

        .chat-input:focus {
            border-color: #8A38F5;
        }

        .send-btn {
            background: #8A38F5;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.25s;
            color: #fff;
            font-size: 1.2rem;
        }

        .send-btn:hover {
            background: #7134C1;
            transform: scale(1.05);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        /* MOBILE */
        @media (max-width: 650px) {
            .sidebar {
                width: 80px;
            }
            .main-content {
                margin-left: 80px;
            }
            .title {
                font-size: 2.1rem;
            }
            .icon-circle {
                width: 85px;
                height: 85px;
            }
            .icon-circle i {
                font-size: 2.4rem;
            }
            .option-text {
                font-size: 1.3rem;
            }
            .message {
                max-width: 85%;
            }
            .chat-input-container {
                padding: 15px;
            }
        }
    </style>
</head>

<body>

    <nav class="sidebar" id="sidebar">
        <a href="../menu/index.html" class="menu-item">
            <i class="fa-solid fa-house"></i>
            <span>Menu</span>
        </a>
        <a href="../cultivo/index.html" class="menu-item">
            <i class="fa-solid fa-tree"></i>
            <span>Cultivo</span>
        </a>
        <a href="../chat/index.html" class="menu-item active">
            <i class="fa-solid fa-comment"></i>
            <span>Chats</span>
        </a>
        <a href="../perfil/index.html" class="menu-item">
            <i class="fa-solid fa-user"></i>
            <span>Perfil</span>
        </a>
        <a href="../configuracoes/index.html" class="menu-item">
            <i class="fa-solid fa-gear"></i>
            <span>Confi...</span>
        </a>
    </nav>

    <main class="main-content">

        <!-- TELA DE SELEÇÃO -->
        <div class="selection-screen" id="selectionScreen">
            <h1 class="title">
                Com <span class="highlight">quem</span> você<br>
                deseja <span class="highlight">conversar</span>?
            </h1>

            <div class="options">
                <div class="option-card" data-option="bot">
                    <div class="icon-circle">
                        <i class="fa-solid fa-robot"></i>
                    </div>
                    <div class="option-text">Chat Bot</div>
                </div>

                <div class="divider">ou</div>

                <div class="option-card" data-option="anonymous">
                    <div class="icon-circle">
                        <i class="fa-solid fa-user-secret"></i>
                    </div>
                    <div class="option-text">Pessoa anônima</div>
                </div>
            </div>
        </div>

        <!-- TELA DE CHAT -->
        <div class="chat-screen hidden" id="chatScreen">
            <div class="chat-header">
                <div class="chat-bot-info">
                    <div class="bot-avatar">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <span class="bot-name">SenseAI</span>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" id="flagBtn">
                        <i class="fa-solid fa-flag"></i>
                    </button>
                    <button class="action-btn" id="exitBtn">
                        <i class="fa-solid fa-arrow-right-from-bracket"></i>
                    </button>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-avatar">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <div class="message-bubble">
                        Olá! Tudo bem? Me chamo SenseAI e estou aqui para te ajudar com qualquer problema que você tiver.
                    </div>
                </div>
                <div class="message bot">
                    <div class="message-avatar">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <div class="message-bubble">
                        Sinta-se à vontade para se abrir comigo
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <button class="emoji-btn">
                    <i class="fa-solid fa-face-grin"></i>
                </button>
                <input type="text" class="chat-input" id="chatInput" placeholder="Escreva uma mensagem...">
                <button class="send-btn" id="sendBtn">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>

    </main>

    <script>
        const sidebar = document.getElementById('sidebar');
        const selectionScreen = document.getElementById('selectionScreen');
        const chatScreen = document.getElementById('chatScreen');
        const optionCards = document.querySelectorAll('.option-card');
        const exitBtn = document.getElementById('exitBtn');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const menuItems = document.querySelectorAll('.menu-item');

        let currentChatType = null;

        // Navegação do menu
        menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                const href = item.getAttribute('href') || '';
                if (href === '#' || href.trim() === '') {
                    e.preventDefault();
                }
                menuItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            });
        });

        // Seleção de tipo de chat
        optionCards.forEach(card => {
            card.addEventListener('click', function() {
                optionCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                
                const option = this.getAttribute('data-option');
                currentChatType = option;
                
                setTimeout(() => {
                    if (option === 'bot') {
                        startBotChat();
                    } else if (option === 'anonymous') {
                        startAnonymousChat();
                    }
                }, 500);
            });
        });

        // Iniciar chat com bot
        function startBotChat() {
            sidebar.classList.add('hidden');
            selectionScreen.classList.add('hidden');
            chatScreen.classList.remove('hidden');
            document.querySelector('.main-content').style.marginLeft = '0';
        }

        // Iniciar chat anônimo
        function startAnonymousChat() {
            sidebar.classList.add('hidden');
            selectionScreen.classList.add('hidden');
            chatScreen.classList.remove('hidden');
            document.querySelector('.main-content').style.marginLeft = '0';
            
            // Atualizar interface para chat anônimo
            document.querySelector('.bot-avatar i').className = 'fa-solid fa-user';
            document.querySelector('.bot-name').textContent = 'Anônimo';
            
            // Limpar mensagens anteriores e adicionar primeira mensagem do anônimo
            chatMessages.innerHTML = '';
            setTimeout(() => {
                addMessage('E aí? Tudo bem?', 'bot');
            }, 300);
        }

        // Voltar para seleção
        exitBtn.addEventListener('click', () => {
            sidebar.classList.remove('hidden');
            selectionScreen.classList.remove('hidden');
            chatScreen.classList.add('hidden');
            document.querySelector('.main-content').style.marginLeft = '95px';
            optionCards.forEach(c => c.classList.remove('selected'));
            
            // Resetar para bot padrão
            document.querySelector('.bot-avatar i').className = 'fa-solid fa-leaf';
            document.querySelector('.bot-name').textContent = 'SenseAI';
            
            // Restaurar mensagens iniciais do bot
            chatMessages.innerHTML = `
                <div class="message bot">
                    <div class="message-avatar">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <div class="message-bubble">
                        Olá! Tudo bem? Me chamo SenseAI e estou aqui para te ajudar com qualquer problema que você tiver.
                    </div>
                </div>
                <div class="message bot">
                    <div class="message-avatar">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <div class="message-bubble">
                        Sinta-se à vontade para se abrir comigo
                    </div>
                </div>
            `;
        });

        // Enviar mensagem
        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;

            // Adicionar mensagem do usuário
            addMessage(text, 'user');
            chatInput.value = '';

            // Simular resposta do bot com delay
            setTimeout(() => {
                showTypingIndicator();
                
                setTimeout(() => {
                    hideTypingIndicator();
                    const botResponse = getBotResponse(text);
                    addMessage(botResponse, 'bot');
                }, 1500);
            }, 500);
        }

        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Adicionar mensagem ao chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar';
            
            // Verificar tipo de chat para ícone correto
            if (sender === 'bot') {
                const isAnonymous = currentChatType === 'anonymous';
                avatarDiv.innerHTML = isAnonymous 
                    ? '<i class="fa-solid fa-user"></i>' 
                    : '<i class="fa-solid fa-leaf"></i>';
            } else {
                avatarDiv.innerHTML = '<i class="fa-solid fa-user"></i>';
            }
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';
            bubbleDiv.textContent = text;
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(bubbleDiv);
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Indicador de digitação
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typingIndicator';
            
            // Verificar tipo de chat para ícone correto
            const isAnonymous = currentChatType === 'anonymous';
            const iconClass = isAnonymous ? 'fa-user' : 'fa-leaf';
            
            typingDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fa-solid ${iconClass}"></i>
                </div>
                <div class="message-bubble">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // Respostas do bot/anônimo
        function getBotResponse(userMessage) {
            if (currentChatType === 'bot') {
                const responses = [
                    'Entendo como você está se sentindo. Conte-me mais sobre isso.',
                    'Isso parece ser importante para você. Como isso te faz sentir?',
                    'Obrigado por compartilhar isso comigo. Estou aqui para ajudar.',
                    'Vejo que isso te afeta bastante. Quer falar mais sobre o assunto?',
                    'Interessante perspectiva. O que você acha que poderia ajudar nessa situação?'
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            } else {
                // Respostas da pessoa anônima
                const responses = [
                    'Entendo... também já passei por algo parecido.',
                    'Nossa, sério? Como você está lidando com isso?',
                    'Isso deve ser difícil mesmo.',
                    'Eu te entendo perfeitamente.',
                    'Quer falar mais sobre isso?',
                    'Estou aqui pra conversar, pode falar.',
                    'Interessante... nunca tinha pensado por esse lado.'
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }
    </script>

</body>
</html>